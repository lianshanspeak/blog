(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{481:function(s,t,a){"use strict";a.r(t);var e=a(29),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"如何查找top-sql-例如io消耗最高的sql-包含sql优化内容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何查找top-sql-例如io消耗最高的sql-包含sql优化内容"}},[s._v("#")]),s._v(" 如何查找TOP SQL (例如IO消耗最高的SQL) (包含SQL优化内容)")]),s._v(" "),a("h2",{attrs:{id:"背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[s._v("#")]),s._v(" 背景")]),s._v(" "),a("p",[s._v("数据库是较大型的应用，对于繁忙的数据库，需要消耗大量的内存、CPU、IO、网络资源。")]),s._v(" "),a("p",[s._v("SQL优化是数据库优化的手段之一，优化什么SQL效果最佳呢？首先要了解最耗费资源的SQL，即TOP SQL。")]),s._v(" "),a("p",[s._v("从哪里可以了解数据库的资源都被哪些SQL消耗掉了呢？")]),s._v(" "),a("p",[s._v("资源分为多个维度，CPU，内存，IO等。如何能了解各个维度层面的TOP SQL呢？")]),s._v(" "),a("p",[s._v("pg_stat_statements插件可以用于统计数据库的资源开销，分析TOP SQL。")]),s._v(" "),a("h2",{attrs:{id:"加载pg-stat-statements模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#加载pg-stat-statements模块"}},[s._v("#")]),s._v(" 加载pg_stat_statements模块")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("vi $PGDATA/postgresql.conf    \nshared_preload_libraries='pg_stat_statements'    \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("如果要跟踪IO消耗的时间，还需要打开如下参数")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("track_io_timing = on    \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("设置单条SQL的最长长度，超过被截断显示（可选）")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("track_activity_query_size = 2048    \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"配置pg-stat-statements采样参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置pg-stat-statements采样参数"}},[s._v("#")]),s._v(" 配置pg_stat_statements采样参数")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("vi $PGDATA/postgresql.conf    \npg_stat_statements.max = 10000           # 在pg_stat_statements中最多保留多少条统计信息，通过LRU算法，覆盖老的记录。    \npg_stat_statements.track = all           # all - (所有SQL包括函数内嵌套的SQL), top - 直接执行的SQL(函数内的sql不被跟踪), none - (不跟踪)    \npg_stat_statements.track_utility = off   # 是否跟踪非DML语句 (例如DDL，DCL)， on表示跟踪, off表示不跟踪    \npg_stat_statements.save = on             # 重启后是否保留统计信息    \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("重启数据库")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("pg_ctl restart -m fast    \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"创建pg-stat-statements-extension"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建pg-stat-statements-extension"}},[s._v("#")]),s._v(" 创建pg_stat_statements extension")]),s._v(" "),a("p",[s._v("在需要查询TOP SQL的数据库中，创建extension")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("create extension pg_stat_statements;    \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"分析top-sql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分析top-sql"}},[s._v("#")]),s._v(" 分析TOP SQL")]),s._v(" "),a("h3",{attrs:{id:"pg-stat-statements输出内容介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pg-stat-statements输出内容介绍"}},[s._v("#")]),s._v(" pg_stat_statements输出内容介绍")]),s._v(" "),a("p",[s._v("查询pg_stat_statements视图，可以得到统计信息")]),s._v(" "),a("p",[s._v("SQL语句中的一些过滤条件在pg_stat_statements中会被替换成变量，减少重复显示的问题。")]),s._v(" "),a("p",[s._v("pg_stat_statements视图包含了一些重要的信息，例如：")]),s._v(" "),a("p",[s._v("\\1. SQL的调用次数，总的耗时，最快执行时间，最慢执行时间，平均执行时间，执行时间的方差（看出抖动），总共扫描或返回或处理了多少行；")]),s._v(" "),a("p",[s._v("\\2. shared buffer的使用情况，命中，未命中，产生脏块，驱逐脏块。")]),s._v(" "),a("p",[s._v("\\3. local buffer的使用情况，命中，未命中，产生脏块，驱逐脏块。")]),s._v(" "),a("p",[s._v("\\4. temp buffer的使用情况，读了多少脏块，驱逐脏块。")]),s._v(" "),a("p",[s._v("\\5. 数据块的读写时间。")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[a("strong",[s._v("Name")])]),s._v(" "),a("th",[a("strong",[s._v("Type")])]),s._v(" "),a("th",[a("strong",[s._v("References")])]),s._v(" "),a("th",[a("strong",[s._v("Description")])])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("userid")]),s._v(" "),a("td",[s._v("oid")]),s._v(" "),a("td",[s._v("pg_authid.oid")]),s._v(" "),a("td",[s._v("OID of user who executed the statement")])]),s._v(" "),a("tr",[a("td",[s._v("dbid")]),s._v(" "),a("td",[s._v("oid")]),s._v(" "),a("td",[s._v("pg_database.oid")]),s._v(" "),a("td",[s._v("OID of database in which the statement was executed")])]),s._v(" "),a("tr",[a("td",[s._v("queryid")]),s._v(" "),a("td",[s._v("bigint")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("Internal hash code, computed from the statement's  parse tree")])]),s._v(" "),a("tr",[a("td",[s._v("query")]),s._v(" "),a("td",[s._v("text")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("Text of a representative statement")])]),s._v(" "),a("tr",[a("td",[s._v("calls")]),s._v(" "),a("td",[s._v("bigint")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("Number of times executed")])]),s._v(" "),a("tr",[a("td",[s._v("total_time")]),s._v(" "),a("td",[s._v("double precision")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("Total time spent in the statement, in milliseconds")])]),s._v(" "),a("tr",[a("td",[s._v("min_time")]),s._v(" "),a("td",[s._v("double precision")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("Minimum time spent in the statement, in  milliseconds")])]),s._v(" "),a("tr",[a("td",[s._v("max_time")]),s._v(" "),a("td",[s._v("double precision")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("Maximum time spent in the statement, in  milliseconds")])]),s._v(" "),a("tr",[a("td",[s._v("mean_time")]),s._v(" "),a("td",[s._v("double precision")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("Mean time spent in the statement, in milliseconds")])]),s._v(" "),a("tr",[a("td",[s._v("stddev_time")]),s._v(" "),a("td",[s._v("double precision")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("Population standard deviation of time spent in the  statement, in milliseconds")])]),s._v(" "),a("tr",[a("td",[s._v("rows")]),s._v(" "),a("td",[s._v("bigint")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("Total number of rows retrieved or affected by the  statement")])]),s._v(" "),a("tr",[a("td",[s._v("shared_blks_hit")]),s._v(" "),a("td",[s._v("bigint")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("Total number of shared block cache hits by the  statement")])]),s._v(" "),a("tr",[a("td",[s._v("shared_blks_read")]),s._v(" "),a("td",[s._v("bigint")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("Total number of shared blocks read by the statement")])]),s._v(" "),a("tr",[a("td",[s._v("shared_blks_dirtied")]),s._v(" "),a("td",[s._v("bigint")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("Total number of shared blocks dirtied by the  statement")])]),s._v(" "),a("tr",[a("td",[s._v("shared_blks_written")]),s._v(" "),a("td",[s._v("bigint")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("Total number of shared blocks written by the  statement")])]),s._v(" "),a("tr",[a("td",[s._v("local_blks_hit")]),s._v(" "),a("td",[s._v("bigint")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("Total number of local block cache hits by the  statement")])]),s._v(" "),a("tr",[a("td",[s._v("local_blks_read")]),s._v(" "),a("td",[s._v("bigint")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("Total number of local blocks read by the statement")])]),s._v(" "),a("tr",[a("td",[s._v("local_blks_dirtied")]),s._v(" "),a("td",[s._v("bigint")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("Total number of local blocks dirtied by the  statement")])]),s._v(" "),a("tr",[a("td",[s._v("local_blks_written")]),s._v(" "),a("td",[s._v("bigint")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("Total number of local blocks written by the  statement")])]),s._v(" "),a("tr",[a("td",[s._v("temp_blks_read")]),s._v(" "),a("td",[s._v("bigint")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("Total number of temp blocks read by the statement")])]),s._v(" "),a("tr",[a("td",[s._v("temp_blks_written")]),s._v(" "),a("td",[s._v("bigint")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("Total number of temp blocks written by the  statement")])]),s._v(" "),a("tr",[a("td",[s._v("blk_read_time")]),s._v(" "),a("td",[s._v("double precision")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("Total time the statement spent reading blocks, in  milliseconds (if track_io_timing is enabled, otherwise zero)")])]),s._v(" "),a("tr",[a("td",[s._v("blk_write_time")]),s._v(" "),a("td",[s._v("double precision")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("Total time the statement spent writing blocks, in  milliseconds (if track_io_timing is enabled, otherwise zero)")])])])]),s._v(" "),a("h3",{attrs:{id:"最耗io-sql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#最耗io-sql"}},[s._v("#")]),s._v(" 最耗IO SQL")]),s._v(" "),a("p",[s._v("单次调用最耗IO SQL TOP 5")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("select userid::regrole, dbid, query from pg_stat_statements order by (blk_read_time+blk_write_time)/calls desc limit 5;    \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("总最耗IO SQL TOP 5")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("select userid::regrole, dbid, query from pg_stat_statements order by (blk_read_time+blk_write_time) desc limit 5;    \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"最耗时-sql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#最耗时-sql"}},[s._v("#")]),s._v(" 最耗时 SQL")]),s._v(" "),a("p",[s._v("单次调用最耗时 SQL TOP 5")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("select userid::regrole, dbid, query from pg_stat_statements order by mean_time desc limit 5;    \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("总最耗时 SQL TOP 5(最需要关注的是这个)")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("select userid::regrole, dbid, query from pg_stat_statements order by total_time desc limit 5;    \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"响应时间抖动最严重-sql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#响应时间抖动最严重-sql"}},[s._v("#")]),s._v(" 响应时间抖动最严重 SQL")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("select userid::regrole, dbid, query from pg_stat_statements order by stddev_time desc limit 5;    \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"最耗共享内存-sql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#最耗共享内存-sql"}},[s._v("#")]),s._v(" 最耗共享内存 SQL")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("select userid::regrole, dbid, query from pg_stat_statements order by (shared_blks_hit+shared_blks_dirtied) desc limit 5;    \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"最耗临时空间-sql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#最耗临时空间-sql"}},[s._v("#")]),s._v(" 最耗临时空间 SQL")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("select userid::regrole, dbid, query from pg_stat_statements order by temp_blks_written desc limit 5;    \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"重置统计信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重置统计信息"}},[s._v("#")]),s._v(" 重置统计信息")]),s._v(" "),a("p",[s._v("用户也可以定期清理历史的统计信息，通过调用如下SQL")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("select pg_stat_statements_reset(); \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"慢sql到底慢在哪里"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#慢sql到底慢在哪里"}},[s._v("#")]),s._v(" 慢SQL到底慢在哪里？")]),s._v(" "),a("p",[s._v("如果要分析慢SQL到底慢在哪里，使用数据库命令"),a("code",[s._v("explain (analyze,verbose,timing,costs,buffers,timing) SQL;")]),s._v("就可以，再加上一些开关，可以看到更加详细的信息。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("开关, 当前会话生效，打印更加详细的信息\n \nset client_min_messages=debug5;\nset log_checkpoints = on;\nset log_error_verbosity = verbose ;\nset log_lock_waits = on;                  \nset log_replication_commands = off;\nset log_temp_files = 0;\nset track_activities = on;\nset track_counts = on;\nset track_io_timing = on;\nset track_functions = 'all';\nset trace_sort=on;\nset log_statement_stats = off;\nset log_parser_stats = on;\nset log_planner_stats = on;\nset log_executor_stats = on;\nset log_autovacuum_min_duration=0;\nset deadlock_timeout = '1s';\nset debug_print_parse = off;\nset debug_print_rewritten = off;\nset debug_print_plan = off;\nset debug_pretty_print = on;\n如\nexplain (analyze,verbose,timing,costs,buffers) select count(*),relkind from pg_class group by relkind order by count(*) desc limit 1;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br")])]),a("h2",{attrs:{id:"慢sql、top-sql优化示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#慢sql、top-sql优化示例"}},[s._v("#")]),s._v(" 慢SQL、TOP SQL优化示例")]),s._v(" "),a("p",[s._v("1、查看真实的执行计划")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),s._v(" lock_timeout"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1s'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),s._v(" statement_timeout"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("analyze")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("verbose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("timing"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("costs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("buffers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("timing"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SQL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- SQL代替为要分析的SQL  ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rollback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("2、从explain结果中，找到最耗时的NODE")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("postgres"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  explain (analyze,verbose,timing,costs,buffers) select count(*),c34 from test where c33<3 group by c34;   ")]),s._v("\n                      QUERY "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PLAN")]),s._v("             \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("---------------------------------------------------------------------------------------------------------------  ")]),s._v("\n HashAggregate  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cost"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18042933.67")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".18042933")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".78")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" width"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("actual "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("time")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("79898.384")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".79898")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".386")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" loops"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  \n   Output: "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c34  \n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Group")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Key")]),s._v(": test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("c34  \n   Buffers: shared hit"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3296")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("read")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16663371")]),s._v("  \n   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  Seq Scan "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("test  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cost"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".17916667")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".00")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("25253334")]),s._v(" width"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("actual "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("time")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.065")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".74406")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".748")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24997473")]),s._v(" loops"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  大量耗费  \n         Output: id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c4"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c6"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c9"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c10"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c11"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c12"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c13"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c14"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c15"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c16"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c17"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c18"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c19"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c20"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c21"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c22"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c23"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c24"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c25"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c26"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c27"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c28"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c29"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c30"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c31"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c32"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c33"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c34"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c35"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c36"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c37"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c38"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c39"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c40"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c41"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c42"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c43"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c44"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c45"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c46"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c47"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c48"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c49"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c50"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c51"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c52"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c53"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c54"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c55"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c56"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c57"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c58"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c59"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c60"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c61"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c62"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c63"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c64  \n         Filter: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("c33 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  \n         "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Rows")]),s._v(" Removed "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" Filter: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("75002527")]),s._v("  过滤了大量的行，但是还有很多行需要被查询  \n         Buffers: shared hit"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3296")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("read")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16663371")]),s._v("  \n Planning "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Time")]),s._v(": "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.096")]),s._v(" ms  \n Execution "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Time")]),s._v(": "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("79898.435")]),s._v(" ms  \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[s._v("3、针对NODE进行优化")]),s._v(" "),a("p",[s._v("3.1、以上例子，实际上就是扫描花费了很多时间，并且扫描后过滤的结果占比比较低，可以使用索引解决。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("postgres=# create index idx on test (c33,c34);  \n  \npostgres=# explain (analyze,verbose,timing,costs,buffers) select count(*),c34 from test where c33<3 group by c34;   \n                                                                    QUERY PLAN                                                                      \n--------------------------------------------------------------------------------------------------------------------------------------------------  \n HashAggregate  (cost=685855.26..685855.37 rows=11 width=16) (actual time=8056.793..8056.795 rows=11 loops=1)  \n   Output: count(*), c34  \n   Group Key: test.c34  \n   Buffers: shared hit=112642  \n   ->  Index Only Scan using idx on public.test  (cost=0.57..557588.60 rows=25653333 width=8) (actual time=0.031..3691.071 rows=24997473 loops=1)  \n         Output: c33, c34  \n         Index Cond: (test.c33 < 3)  \n         Heap Fetches: 0  \n         Buffers: shared hit=112642   扫描了多少 index 数据块   \n Planning Time: 0.166 ms  \n Execution Time: 8056.842 ms  \n(11 rows)  \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[s._v("3.2、加索引后的优化，聚集。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("如果未使用index only scan，那么需要回表，回表可能导致扫描更多的数据块。  \n  \n当数据分散存储是，使用聚集可以优化，本例使用了idx only scan，不需要优化  \n  \ncluster test using idx;  \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("3.3、聚集后的优化，并行。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("postgres=# set max_parallel_workers_per_gather =32;  \nSET  \npostgres=#  explain (analyze,verbose,timing,costs,buffers) select count(*),c34 from test where c33<3 group by c34;   \n                                                                                QUERY PLAN                                                                                  \n--------------------------------------------------------------------------------------------------------------------------------------------------------------------------  \n Finalize GroupAggregate  (cost=318089.48..318125.45 rows=11 width=16) (actual time=999.918..1000.053 rows=11 loops=1)  \n   Output: count(*), c34  \n   Group Key: test.c34  \n   Buffers: shared hit=9623  \n   ->  Gather Merge  (cost=318089.48..318124.02 rows=264 width=16) (actual time=999.768..999.973 rows=275 loops=1)  \n         Output: c34, (PARTIAL count(*))  \n         Workers Planned: 24  \n         Workers Launched: 24  \n         Buffers: shared hit=9623  \n         ->  Sort  (cost=317088.90..317088.93 rows=11 width=16) (actual time=926.196..926.198 rows=11 loops=25)  \n               Output: c34, (PARTIAL count(*))  \n               Sort Key: test.c34  \n               Sort Method: quicksort  Memory: 25kB  \n               Worker 0:  Sort Method: quicksort  Memory: 25kB  \n               Worker 1:  Sort Method: quicksort  Memory: 25kB  \n               Worker 2:  Sort Method: quicksort  Memory: 25kB  \n               Worker 3:  Sort Method: quicksort  Memory: 25kB  \n               Worker 4:  Sort Method: quicksort  Memory: 25kB  \n               Worker 5:  Sort Method: quicksort  Memory: 25kB  \n               Worker 6:  Sort Method: quicksort  Memory: 25kB  \n               Worker 7:  Sort Method: quicksort  Memory: 25kB  \n               Worker 8:  Sort Method: quicksort  Memory: 25kB  \n               Worker 9:  Sort Method: quicksort  Memory: 25kB  \n               Worker 10:  Sort Method: quicksort  Memory: 25kB  \n               Worker 11:  Sort Method: quicksort  Memory: 25kB  \n               Worker 12:  Sort Method: quicksort  Memory: 25kB  \n               Worker 13:  Sort Method: quicksort  Memory: 25kB  \n               Worker 14:  Sort Method: quicksort  Memory: 25kB  \n               Worker 15:  Sort Method: quicksort  Memory: 25kB  \n               Worker 16:  Sort Method: quicksort  Memory: 25kB  \n               Worker 17:  Sort Method: quicksort  Memory: 25kB  \n               Worker 18:  Sort Method: quicksort  Memory: 25kB  \n               Worker 19:  Sort Method: quicksort  Memory: 25kB  \n               Worker 20:  Sort Method: quicksort  Memory: 25kB  \n               Worker 21:  Sort Method: quicksort  Memory: 25kB  \n               Worker 22:  Sort Method: quicksort  Memory: 25kB  \n               Worker 23:  Sort Method: quicksort  Memory: 25kB  \n               Buffers: shared hit=207494  \n               Worker 0: actual time=923.125..923.126 rows=11 loops=1  \n                 Buffers: shared hit=8571  \n               Worker 1: actual time=922.567..922.568 rows=11 loops=1  \n                 Buffers: shared hit=7575  \n               Worker 2: actual time=923.209..923.210 rows=11 loops=1  \n                 Buffers: shared hit=8448  \n               Worker 3: actual time=922.613..922.615 rows=11 loops=1  \n                 Buffers: shared hit=7958  \n               Worker 4: actual time=923.265..923.266 rows=11 loops=1  \n                 Buffers: shared hit=8706  \n               Worker 5: actual time=923.329..923.330 rows=11 loops=1  \n                 Buffers: shared hit=8800  \n               Worker 6: actual time=923.298..923.299 rows=11 loops=1  \n                 Buffers: shared hit=8637  \n               Worker 7: actual time=922.778..922.780 rows=11 loops=1  \n                 Buffers: shared hit=7168  \n               Worker 8: actual time=923.348..923.349 rows=11 loops=1  \n                 Buffers: shared hit=8804  \n               Worker 9: actual time=923.303..923.304 rows=11 loops=1  \n                 Buffers: shared hit=8576  \n               Worker 10: actual time=923.270..923.272 rows=11 loops=1  \n                 Buffers: shared hit=8848  \n               Worker 11: actual time=923.308..923.309 rows=11 loops=1  \n                 Buffers: shared hit=8500  \n               Worker 12: actual time=923.415..923.417 rows=11 loops=1  \n                 Buffers: shared hit=8606  \n               Worker 13: actual time=922.827..922.828 rows=11 loops=1  \n                 Buffers: shared hit=7402  \n               Worker 14: actual time=923.307..923.309 rows=11 loops=1  \n                 Buffers: shared hit=8415  \n               Worker 15: actual time=922.994..922.996 rows=11 loops=1  \n                 Buffers: shared hit=7467  \n               Worker 16: actual time=923.456..923.457 rows=11 loops=1  \n                 Buffers: shared hit=8460  \n               Worker 17: actual time=923.364..923.366 rows=11 loops=1  \n                 Buffers: shared hit=8647  \n               Worker 18: actual time=923.287..923.289 rows=11 loops=1  \n                 Buffers: shared hit=8549  \n               Worker 19: actual time=922.968..922.969 rows=11 loops=1  \n                 Buffers: shared hit=7211  \n               Worker 20: actual time=923.361..923.363 rows=11 loops=1  \n                 Buffers: shared hit=8650  \n               Worker 21: actual time=923.178..923.179 rows=11 loops=1  \n                 Buffers: shared hit=7691  \n               Worker 22: actual time=923.129..923.131 rows=11 loops=1  \n                 Buffers: shared hit=7609  \n               Worker 23: actual time=923.427..923.428 rows=11 loops=1  \n                 Buffers: shared hit=8573  \n               ->  Partial HashAggregate  (cost=317088.60..317088.71 rows=11 width=16) (actual time=926.136..926.138 rows=11 loops=25)  \n                     Output: c34, PARTIAL count(*)  \n                     Group Key: test.c34  \n                     Buffers: shared hit=207326  \n                     Worker 0: actual time=923.055..923.058 rows=11 loops=1  \n                       Buffers: shared hit=8564  \n                     Worker 1: actual time=922.506..922.509 rows=11 loops=1  \n                       Buffers: shared hit=7568  \n                     Worker 2: actual time=923.159..923.162 rows=11 loops=1  \n                       Buffers: shared hit=8441  \n                     Worker 3: actual time=922.551..922.553 rows=11 loops=1  \n                       Buffers: shared hit=7951  \n                     Worker 4: actual time=923.220..923.223 rows=11 loops=1  \n                       Buffers: shared hit=8699  \n                     Worker 5: actual time=923.285..923.288 rows=11 loops=1  \n                       Buffers: shared hit=8793  \n                     Worker 6: actual time=923.254..923.257 rows=11 loops=1  \n                       Buffers: shared hit=8630  \n                     Worker 7: actual time=922.695..922.698 rows=11 loops=1  \n                       Buffers: shared hit=7161  \n                     Worker 8: actual time=923.290..923.293 rows=11 loops=1  \n                       Buffers: shared hit=8797  \n                     Worker 9: actual time=923.254..923.256 rows=11 loops=1  \n                       Buffers: shared hit=8569  \n                     Worker 10: actual time=923.223..923.226 rows=11 loops=1  \n                       Buffers: shared hit=8841  \n                     Worker 11: actual time=923.224..923.226 rows=11 loops=1  \n                       Buffers: shared hit=8493  \n                     Worker 12: actual time=923.373..923.376 rows=11 loops=1  \n                       Buffers: shared hit=8599  \n                     Worker 13: actual time=922.766..922.769 rows=11 loops=1  \n                       Buffers: shared hit=7395  \n                     Worker 14: actual time=923.232..923.235 rows=11 loops=1  \n                       Buffers: shared hit=8408  \n                     Worker 15: actual time=922.935..922.938 rows=11 loops=1  \n                       Buffers: shared hit=7460  \n                     Worker 16: actual time=923.406..923.409 rows=11 loops=1  \n                       Buffers: shared hit=8453  \n                     Worker 17: actual time=923.317..923.319 rows=11 loops=1  \n                       Buffers: shared hit=8640  \n                     Worker 18: actual time=923.204..923.206 rows=11 loops=1  \n                       Buffers: shared hit=8542  \n                     Worker 19: actual time=922.893..922.895 rows=11 loops=1  \n                       Buffers: shared hit=7204  \n                     Worker 20: actual time=923.283..923.286 rows=11 loops=1  \n                       Buffers: shared hit=8643  \n                     Worker 21: actual time=923.089..923.092 rows=11 loops=1  \n                       Buffers: shared hit=7684  \n                     Worker 22: actual time=923.049..923.051 rows=11 loops=1  \n                       Buffers: shared hit=7602  \n                     Worker 23: actual time=923.379..923.381 rows=11 loops=1  \n                       Buffers: shared hit=8566  \n                     ->  Parallel Index Only Scan using idx on public.test  (cost=0.57..311744.15 rows=1068889 width=8) (actual time=0.294..726.243 rows=999899 loops=25)  \n                           Output: c33, c34  \n                           Index Cond: (test.c33 < 3)  \n                           Heap Fetches: 0  \n                           Buffers: shared hit=207326  \n                           Worker 0: actual time=0.249..739.989 rows=1028079 loops=1  \n                             Buffers: shared hit=8564  \n                           Worker 1: actual time=0.500..698.527 rows=912456 loops=1  \n                             Buffers: shared hit=7568  \n                           Worker 2: actual time=0.449..733.146 rows=1010592 loops=1  \n                             Buffers: shared hit=8441  \n                           Worker 3: actual time=0.554..712.277 rows=953955 loops=1  \n                             Buffers: shared hit=7951  \n                           Worker 4: actual time=0.088..736.872 rows=1047915 loops=1  \n                             Buffers: shared hit=8699  \n                           Worker 5: actual time=0.172..734.815 rows=1056267 loops=1  \n                             Buffers: shared hit=8793  \n                           Worker 6: actual time=0.052..737.294 rows=1040346 loops=1  \n                             Buffers: shared hit=8630  \n                           Worker 7: actual time=0.086..696.398 rows=862866 loops=1  \n                             Buffers: shared hit=7161  \n                           Worker 8: actual time=0.051..735.082 rows=1053918 loops=1  \n                             Buffers: shared hit=8797  \n                           Worker 9: actual time=0.336..740.511 rows=1031994 loops=1  \n                             Buffers: shared hit=8569  \n                           Worker 10: actual time=0.496..735.275 rows=1063836 loops=1  \n                             Buffers: shared hit=8841  \n                           Worker 11: actual time=0.238..728.468 rows=1016595 loops=1  \n                             Buffers: shared hit=8493  \n                           Worker 12: actual time=0.049..737.655 rows=1035648 loops=1  \n                             Buffers: shared hit=8599  \n                           Worker 13: actual time=0.302..699.745 rows=888966 loops=1  \n                             Buffers: shared hit=7395  \n                           Worker 14: actual time=0.200..729.542 rows=1011114 loops=1  \n                             Buffers: shared hit=8408  \n                           Worker 15: actual time=0.296..695.864 rows=898623 loops=1  \n                             Buffers: shared hit=7460  \n                           Worker 16: actual time=0.070..734.046 rows=1015812 loops=1  \n                             Buffers: shared hit=8453  \n                           Worker 17: actual time=0.053..737.755 rows=1040868 loops=1  \n                             Buffers: shared hit=8640  \n                           Worker 18: actual time=0.081..737.488 rows=1030689 loops=1  \n                             Buffers: shared hit=8542  \n                           Worker 19: actual time=0.092..694.639 rows=870957 loops=1  \n                             Buffers: shared hit=7204  \n                           Worker 20: actual time=0.523..737.503 rows=1040607 loops=1  \n                             Buffers: shared hit=8643  \n                           Worker 21: actual time=1.978..709.165 rows=925182 loops=1  \n                             Buffers: shared hit=7684  \n                           Worker 22: actual time=0.294..699.942 rows=907497 loops=1  \n                             Buffers: shared hit=7602  \n                           Worker 23: actual time=0.120..739.781 rows=1030689 loops=1  \n                             Buffers: shared hit=8566  \n Planning Time: 0.311 ms  \n Execution Time: 1007.876 ms  \n(193 rows)  \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br"),a("span",{staticClass:"line-number"},[s._v("122")]),a("br"),a("span",{staticClass:"line-number"},[s._v("123")]),a("br"),a("span",{staticClass:"line-number"},[s._v("124")]),a("br"),a("span",{staticClass:"line-number"},[s._v("125")]),a("br"),a("span",{staticClass:"line-number"},[s._v("126")]),a("br"),a("span",{staticClass:"line-number"},[s._v("127")]),a("br"),a("span",{staticClass:"line-number"},[s._v("128")]),a("br"),a("span",{staticClass:"line-number"},[s._v("129")]),a("br"),a("span",{staticClass:"line-number"},[s._v("130")]),a("br"),a("span",{staticClass:"line-number"},[s._v("131")]),a("br"),a("span",{staticClass:"line-number"},[s._v("132")]),a("br"),a("span",{staticClass:"line-number"},[s._v("133")]),a("br"),a("span",{staticClass:"line-number"},[s._v("134")]),a("br"),a("span",{staticClass:"line-number"},[s._v("135")]),a("br"),a("span",{staticClass:"line-number"},[s._v("136")]),a("br"),a("span",{staticClass:"line-number"},[s._v("137")]),a("br"),a("span",{staticClass:"line-number"},[s._v("138")]),a("br"),a("span",{staticClass:"line-number"},[s._v("139")]),a("br"),a("span",{staticClass:"line-number"},[s._v("140")]),a("br"),a("span",{staticClass:"line-number"},[s._v("141")]),a("br"),a("span",{staticClass:"line-number"},[s._v("142")]),a("br"),a("span",{staticClass:"line-number"},[s._v("143")]),a("br"),a("span",{staticClass:"line-number"},[s._v("144")]),a("br"),a("span",{staticClass:"line-number"},[s._v("145")]),a("br"),a("span",{staticClass:"line-number"},[s._v("146")]),a("br"),a("span",{staticClass:"line-number"},[s._v("147")]),a("br"),a("span",{staticClass:"line-number"},[s._v("148")]),a("br"),a("span",{staticClass:"line-number"},[s._v("149")]),a("br"),a("span",{staticClass:"line-number"},[s._v("150")]),a("br"),a("span",{staticClass:"line-number"},[s._v("151")]),a("br"),a("span",{staticClass:"line-number"},[s._v("152")]),a("br"),a("span",{staticClass:"line-number"},[s._v("153")]),a("br"),a("span",{staticClass:"line-number"},[s._v("154")]),a("br"),a("span",{staticClass:"line-number"},[s._v("155")]),a("br"),a("span",{staticClass:"line-number"},[s._v("156")]),a("br"),a("span",{staticClass:"line-number"},[s._v("157")]),a("br"),a("span",{staticClass:"line-number"},[s._v("158")]),a("br"),a("span",{staticClass:"line-number"},[s._v("159")]),a("br"),a("span",{staticClass:"line-number"},[s._v("160")]),a("br"),a("span",{staticClass:"line-number"},[s._v("161")]),a("br"),a("span",{staticClass:"line-number"},[s._v("162")]),a("br"),a("span",{staticClass:"line-number"},[s._v("163")]),a("br"),a("span",{staticClass:"line-number"},[s._v("164")]),a("br"),a("span",{staticClass:"line-number"},[s._v("165")]),a("br"),a("span",{staticClass:"line-number"},[s._v("166")]),a("br"),a("span",{staticClass:"line-number"},[s._v("167")]),a("br"),a("span",{staticClass:"line-number"},[s._v("168")]),a("br"),a("span",{staticClass:"line-number"},[s._v("169")]),a("br"),a("span",{staticClass:"line-number"},[s._v("170")]),a("br"),a("span",{staticClass:"line-number"},[s._v("171")]),a("br"),a("span",{staticClass:"line-number"},[s._v("172")]),a("br"),a("span",{staticClass:"line-number"},[s._v("173")]),a("br"),a("span",{staticClass:"line-number"},[s._v("174")]),a("br"),a("span",{staticClass:"line-number"},[s._v("175")]),a("br"),a("span",{staticClass:"line-number"},[s._v("176")]),a("br"),a("span",{staticClass:"line-number"},[s._v("177")]),a("br"),a("span",{staticClass:"line-number"},[s._v("178")]),a("br"),a("span",{staticClass:"line-number"},[s._v("179")]),a("br"),a("span",{staticClass:"line-number"},[s._v("180")]),a("br"),a("span",{staticClass:"line-number"},[s._v("181")]),a("br"),a("span",{staticClass:"line-number"},[s._v("182")]),a("br"),a("span",{staticClass:"line-number"},[s._v("183")]),a("br"),a("span",{staticClass:"line-number"},[s._v("184")]),a("br"),a("span",{staticClass:"line-number"},[s._v("185")]),a("br"),a("span",{staticClass:"line-number"},[s._v("186")]),a("br"),a("span",{staticClass:"line-number"},[s._v("187")]),a("br"),a("span",{staticClass:"line-number"},[s._v("188")]),a("br"),a("span",{staticClass:"line-number"},[s._v("189")]),a("br"),a("span",{staticClass:"line-number"},[s._v("190")]),a("br"),a("span",{staticClass:"line-number"},[s._v("191")]),a("br"),a("span",{staticClass:"line-number"},[s._v("192")]),a("br"),a("span",{staticClass:"line-number"},[s._v("193")]),a("br"),a("span",{staticClass:"line-number"},[s._v("194")]),a("br"),a("span",{staticClass:"line-number"},[s._v("195")]),a("br"),a("span",{staticClass:"line-number"},[s._v("196")]),a("br"),a("span",{staticClass:"line-number"},[s._v("197")]),a("br"),a("span",{staticClass:"line-number"},[s._v("198")]),a("br"),a("span",{staticClass:"line-number"},[s._v("199")]),a("br")])]),a("p",[s._v("3.4、并行后的优化，列存储。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("当前未有内置列存，可以使用VOPS插件，或者CSTORE插件  \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("3.5、列存后的优化，动态编译、向量计算。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("set jit=on  \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);t.default=n.exports}}]);